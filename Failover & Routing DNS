/ip dns
set allow-remote-requests=yes servers=1.1.1.1,8.8.8.8

/ip firewall mangle
add action=mark-connection chain=output dst-address=1.1.1.1 dst-port=53 new-connection-mark=dnsA passthrough=yes protocol=tcp
add action=mark-connection chain=output dst-address=1.1.1.1 dst-port=53 new-connection-mark=dnsA passthrough=yes protocol=udp
add action=mark-routing chain=output connection-mark=dnsA new-routing-mark=ISP1 passthrough=no
add action=mark-connection chain=output dst-address=8.8.8.8 dst-port=53 new-connection-mark=dnsB passthrough=yes protocol=tcp
add action=mark-connection chain=output dst-address=8.8.8.8 dst-port=53 new-connection-mark=dnsB passthrough=yes protocol=udp
add action=mark-routing chain=output connection-mark=dnsB new-routing-mark=ISP2 passthrough=no

/ip route
add check-gateway=ping distance=1 gateway=1.1.1.1 scope=25 target-scope=25
add check-gateway=ping distance=1 dst-address=1.1.1.1/32 gateway=192.168.10.1 scope=25 target-scope=25
add check-gateway=ping distance=2 gateway=192.168.20.1 routing-mark=ISP2


Note :
- sesuaikan IP Gateway dan DNS yang digunakan dan inginkan.

Kasus : Failover Recursive ditambah failover dns, sehingga disaat failover provider terjadi dibarengi dengan pergantian jalur dns.
